'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up (queryInterface, Sequelize) {
    // Генерация 50 дополнительных карточек вопросов
    const questions = [];
    
    // Массивы для генерации различных вопросов и ответов
    const questionTemplates = [
      'Как часто следует проходить обследование на {тема}?',
      'Какие симптомы указывают на {тема}?',
      'Какие методы лечения существуют для {тема}?',
      'Как предотвратить развитие {тема}?',
      'Какие факторы риска связаны с {тема}?',
      'Как диагностируют {тема}?',
      'Какие осложнения могут возникнуть при {тема}?',
      'Какова эффективность лечения {тема}?',
      'Какие препараты применяются при {тема}?',
      'Какие рекомендации по образу жизни при {тема}?'
    ];
    
    const answerTemplates = [
      'Рекомендуется регулярное обследование каждые {период} для профилактики и раннего выявления.',
      'Основные симптомы включают {симптом1}, {симптом2} и {симптом3}. При их появлении следует обратиться к врачу.',
      'Современные методы лечения включают {метод1}, {метод2} и {метод3}. Выбор зависит от стадии заболевания.',
      'Профилактика включает {мера1}, {мера2} и {мера3}. Регулярные осмотры помогают выявить заболевание на ранней стадии.',
      'Факторы риска включают {фактор1}, {фактор2} и {фактор3}. Снижение риска возможно при изменении образа жизни.',
      'Диагностика включает {метод1}, {метод2} и {метод3}. Точность диагноза зависит от квалификации врача и оборудования.',
      'Возможные осложнения включают {осложнение1}, {осложнение2} и {осложнение3}. Своевременное лечение снижает риск осложнений.',
      'Эффективность лечения составляет {процент}% при соблюдении всех рекомендаций врача и своевременном обращении за помощью.',
      'Применяются препараты {препарат1}, {препарат2} и {препарат3}. Дозировка и курс лечения определяются индивидуально.',
      'Рекомендуется {мера1}, {мера2} и {мера3}. Отказ от вредных привычек и регулярная физическая активность улучшают прогноз.'
    ];
    
    const topics = [
      'гипертония', 'диабет', 'астма', 'гастрит', 'остеохондроз', 
      'артериальная гипертензия', 'бронхит', 'пневмония', 'гастроэзофагеальная рефлюксная болезнь',
      'язва желудка', 'панкреатит', 'гепатит', 'нефропатия', 'уролитиаз',
      'простатит', 'аденома простаты', 'мастопатия', 'миома матки', 'эндометриоз',
      'остеопороз', 'артроз', 'артрит', 'сколиоз', 'кифоз',
      'лордоз', 'мигрень', 'инсульт', 'инфаркт', 'онкология',
      'лейкоз', 'лимфома', 'меланома', 'рак легких', 'рак молочной железы',
      'рак простаты', 'рак толстой кишки', 'рак печени', 'рак поджелудочной железы', 'рак почки',
      'рак мочевого пузыря', 'рак шейки матки', 'рак яичников', 'рак кожи', 'рак костей'
    ];
    
    const categories = [
      'Кардиология', 'Эндокринология', 'Пульмонология', 'Гастроэнтерология', 'Неврология',
      'Урология', 'Гинекология', 'Ортопедия', 'Онкология', 'Терапия'
    ];
    
    const periods = ['3 месяца', '6 месяцев', '1 год', '2 года', '5 лет'];
    const symptoms = ['головная боль', 'тошнота', 'слабость', 'повышенная температура', 'одышка', 'боль в груди', 'нарушение сна', 'потеря аппетита', 'раздражительность', 'апатия'];
    const methods = ['лечение антибиотиками', 'физиотерапия', 'хирургическое вмешательство', 'прием витаминов', 'диета', 'упражнения ЛФК', 'массаж', 'иглоукалывание', 'лазерная терапия', 'магнитотерапия'];
    const measures = ['здоровое питание', 'регулярные физические упражнения', 'отказ от вредных привычек', 'контроль веса', 'снижение стресса', 'соблюдение режима сна', 'прием витаминов', 'регулярные медицинские осмотры', 'закаливание', 'избегание переохлаждения'];
    const factors = ['наследственность', 'возраст', 'пол', 'образ жизни', 'профессиональные вредности', 'экологическая обстановка', 'хронические заболевания', 'прием лекарств', 'гормональные нарушения', 'иммунные расстройства'];
    const complications = ['хроническая форма', 'метастазы', 'инвалидность', 'летальный исход', 'рецидив', 'осложнения со стороны других органов', 'психологические расстройства', 'социальная дезадаптация', 'экономические трудности', 'снижение качества жизни'];
    const medicines = ['анальгетики', 'антибиотики', 'противовоспалительные препараты', 'витамины', 'гормоны', 'иммуномодуляторы', 'антидепрессанты', 'транквилизаторы', 'нейролептики', 'ноотропы'];
    
    // Добавляем 3 существующие карточки
    questions.push(
      {
        question: 'Как часто нужно проходить медицинский осмотр?',
        answer: 'Медицинский осмотр рекомендуется проходить ежегодно для взрослых и раз в полгода для пожилых людей.',
        categoryId: 1,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        question: 'Какие вакцины необходимы взрослым?',
        answer: 'Взрослым рекомендуются вакцины против гриппа, столбняка, дифтерии, пневмококковой инфекции и других заболеваний в зависимости от возраста и состояния здоровья.',
        categoryId: 2,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        question: 'Как правильно питаться для поддержания здоровья?',
        answer: 'Правильное питание включает употребление овощей, фруктов, цельнозерновых продуктов, нежирных белков и ограничение сахара, соли и насыщенных жиров.',
        categoryId: 3,
        createdAt: new Date(),
        updatedAt: new Date()
      }
    );
    
    // Добавляем вопросы от разных дат
        const additionalQuestions = [
          {
            question: 'Какие меры предосторожности следует соблюдать при контакте с больным гриппом?',
            answer: 'Следует избегать близкого контакта с больным, часто мыть руки, использовать медицинскую маску и регулярно проветривать помещение.',
            categoryId: 4,
            createdAt: new Date('2026-01-14'),
            updatedAt: new Date('2026-01-14')
          },
          {
            question: 'Как правильно измерять артериальное давление в домашних условиях?',
            answer: 'Измерять давление следует в спокойной обстановке, сидя, после 5-минутного отдыха. Рука должна быть на уровне сердца, манжета плотно прилегать к плечу.',
            categoryId: 5,
            createdAt: new Date('2026-01-14'),
            updatedAt: new Date('2026-01-14')
          },
          {
            question: 'Какие продукты следует исключить из рациона при повышенном уровне холестерина?',
            answer: 'Следует ограничить потребление жирного мяса, яиц, сливочного масла, маргарина, фастфуда и продуктов с высоким содержанием насыщенных жиров.',
            categoryId: 3,
            createdAt: new Date('2026-01-14'),
            updatedAt: new Date('2026-01-14')
          },
          {
            question: 'Какие упражнения рекомендуются при остеохондрозе шейного отдела позвоночника?',
            answer: 'Рекомендуются плавание, йога, лечебная физкультура, упражнения на растяжку шеи и плечевого пояса, а также изометрические упражнения.',
            categoryId: 6,
            createdAt: new Date('2026-01-14'),
            updatedAt: new Date('2026-01-14')
          },
          {
            question: 'Как часто следует проходить маммографию женщинам после 40 лет?',
            answer: 'Женщинам после 40 лет рекомендуется проходить маммографию ежегодно для раннего выявления рака молочной железы.',
            categoryId: 7,
            createdAt: new Date('2026-01-14'),
            updatedAt: new Date('2026-01-14')
          },
          {
            question: 'Какие симптомы указывают на развитие анемии?',
            answer: 'Основные симптомы анемии включают слабость, головокружение, бледность кожи, одышку и учащенное сердцебиение.',
            categoryId: 1,
            createdAt: new Date('2026-01-10'),
            updatedAt: new Date('2026-01-10')
          },
          {
            question: 'Какова рекомендуемая дозировка витамина D для взрослых?',
            answer: 'Рекомендуемая дозировка витамина D для взрослых составляет 600-800 МЕ в сутки, при дефиците может потребоваться более высокая доза по назначению врача.',
            categoryId: 2,
            createdAt: new Date('2026-01-05'),
            updatedAt: new Date('2026-01-05')
          },
          {
            question: 'Какие осложнения могут возникнуть при нелеченом диабете?',
            answer: 'При нелеченом диабете могут развиться осложнения, такие как диабетическая кома, поражение почек, глаз, нервов и сердечно-сосудистой системы.',
            categoryId: 3,
            createdAt: new Date('2026-01-01'),
            updatedAt: new Date('2026-01-01')
          },
          {
            question: 'Какие меры профилактики простудных заболеваний наиболее эффективны зимой?',
            answer: 'Эффективные меры профилактики включают закаливание, регулярное проветривание помещений, увлажнение воздуха, прием витаминов и избегание переохлаждения.',
            categoryId: 4,
            createdAt: new Date('2025-12-20'),
            updatedAt: new Date('2025-12-20')
          },
          {
            question: 'Как часто следует посещать стоматолога для профилактического осмотра?',
            answer: 'Рекомендуется посещать стоматолога для профилактического осмотра не реже 2 раз в год, при наличии проблем - по назначению врача.',
            categoryId: 5,
            createdAt: new Date('2025-12-15'),
            updatedAt: new Date('2025-12-15')
          }
        ];
    
    questions.push(...additionalQuestions);
    
    // Генерируем 50 дополнительных карточек
    for (let i = 0; i < 50; i++) {
      const topicIndex = Math.floor(Math.random() * topics.length);
      const categoryIndex = Math.floor(Math.random() * categories.length);
      const questionTemplateIndex = Math.floor(Math.random() * questionTemplates.length);
      const answerTemplateIndex = Math.floor(Math.random() * answerTemplates.length);
      const periodIndex = Math.floor(Math.random() * periods.length);
      
      // Генерируем случайные симптомы, методы, меры и т.д.
      const randomSymptoms = [];
      const randomMethods = [];
      const randomMeasures = [];
      const randomFactors = [];
      const randomComplications = [];
      const randomMedicines = [];
      
      for (let j = 0; j < 3; j++) {
        randomSymptoms.push(symptoms[Math.floor(Math.random() * symptoms.length)]);
        randomMethods.push(methods[Math.floor(Math.random() * methods.length)]);
        randomMeasures.push(measures[Math.floor(Math.random() * measures.length)]);
        randomFactors.push(factors[Math.floor(Math.random() * factors.length)]);
        randomComplications.push(complications[Math.floor(Math.random() * complications.length)]);
        randomMedicines.push(medicines[Math.floor(Math.random() * medicines.length)]);
      }
      
      const question = questionTemplates[questionTemplateIndex].replace('{тема}', topics[topicIndex]);
      const answer = answerTemplates[answerTemplateIndex]
        .replace('{период}', periods[periodIndex])
        .replace('{симптом1}', randomSymptoms[0])
        .replace('{симптом2}', randomSymptoms[1])
        .replace('{симптом3}', randomSymptoms[2])
        .replace('{метод1}', randomMethods[0])
        .replace('{метод2}', randomMethods[1])
        .replace('{метод3}', randomMethods[2])
        .replace('{мера1}', randomMeasures[0])
        .replace('{мера2}', randomMeasures[1])
        .replace('{мера3}', randomMeasures[2])
        .replace('{фактор1}', randomFactors[0])
        .replace('{фактор2}', randomFactors[1])
        .replace('{фактор3}', randomFactors[2])
        .replace('{осложнение1}', randomComplications[0])
        .replace('{осложнение2}', randomComplications[1])
        .replace('{осложнение3}', randomComplications[2])
        .replace('{препарат1}', randomMedicines[0])
        .replace('{препарат2}', randomMedicines[1])
        .replace('{препарат3}', randomMedicines[2])
        .replace('{процент}', Math.floor(Math.random() * 40 + 60).toString()); // 60-99%
      
      questions.push({
        question,
        answer,
        categoryId: (categoryIndex % 16) + 1, // Выбираем одну из 16 категорий по кругу
        createdAt: new Date(),
        updatedAt: new Date()
      });
    }
    
    await queryInterface.bulkInsert('Questions', questions, {});
  },

  async down (queryInterface, Sequelize) {
    await queryInterface.bulkDelete('Questions', null, {});
  }
};
